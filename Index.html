<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>!@#!@# YOUR SMARTBOARDS</title>
  <script src="http://js.leapmotion.com/leap-0.6.3.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<body>
<canvas id="c" height="100%" width="100%"></canvas>
<div id="mainWrapper">
  <button type="button" id="save" onclick="saveCanvas()">Save</button>
</div>
<style>
* {
  padding: 0px;
  margin: 0px;
}
</style>

<script>
  var previousFrame = null;
  var c;
  var ctx;

  var controllerOptions = {enableGestures: true};

  var lastX = 0;
  var lastY = 0;
  var lastlastX = 0;
  var lastlastY = 0;

  (function () {
    c = document.getElementById("c");
    c.height = window.innerHeight;
    c.width = window.innerWidth;
    ctx = c.getContext("2d");

  })();

  Leap.loop(controllerOptions, function (frame) {
    var pointableOutput = document.getElementById("pointableData");
    var pointableString = "";
    if (frame.pointables.length > 0) {

      var i = 1;

      var pointable = frame.pointables[i];

      if (pointable.extended) {

        var x = (pointable.tipPosition[0] + c.offsetWidth / 2);
        var y = c.offsetHeight - pointable.tipPosition[1];

        if (lastX != 0) {
          ctx.beginPath();
          ctx.moveTo(lastX, lastY);
          ctx.quadraticCurveTo(lastlastX, lastlastY, x, y);
          ctx.stroke();
        }

        lastX = x;
        lastY = y;
        lastlastX = lastX;
        lastlastY = lastY;

        console.log("x " + (pointable.tipPosition[0].toFixed(1) + 300 ) + ", y " + pointable.tipPosition[1].toFixed(1))
      }
    }
    else {
      lastX = 0;
    }
    previousFrame = frame;
  })

  function saveCanvas() {
    var image = c.toDataURL("image/png").replace("image/png", "image/octet-stream");

    window.location.href=image;  }

</script>
</body>
</html>
